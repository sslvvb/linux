# Report DO1

## Part 1. Установка ОС

- Установка Ubuntu 20.04 Server LTS без графического интерфейса.

![Ubuntu version](/linux/images/Part1.png)

## Part 2. Создание пользователя

- Вызов команды для создания пользователя.

![New Person command](/linux/images/Part2_1.png)

- Вывод команды `cat /etc/passwd`.

![Скриншот вывода команды cat /etc/passwd](/linux/images/Part2_2.png)

## Part 3. Настройка сети ОС

- Задаем название машины

![hostname](/linux/images/Part3_1.png)

- Устанавливаем временную зону, соответствующую текущему местоположению

Просматриваем список доступных часовых поясов командой  `ls /usr/share/zoneinfo/`<br>
Находим нужный часовой пояс командой `timedatectl list-timezones | grep Asia | less`<br>
Устанавливаем временную зону командой `timedatectl set-timezone Asia/Novosibirsk`

![new time /etc/localtime](/linux/images/Part3_2.png)

- Выводим название всех сетевых интерфейсов

Установим пакет net-tools `sudo apt install net-tools` и выведем сетевые интерфейсы командой `ifconfig`

![ifconfig](/linux/images/Part3_3.png)

Интерфейс lo - local loopback - интерфейс петли обратной связи. Это локальный интерфейс, трафик не уходит за пределы конкретной машины, условно зацикливает его сам на себя, от источника обратно к источнику без модификаций, можно сравнить с зеркалом. Нужен для работы многих приложений, для тестирования и отладки. Например, может быть использован сетевым клиентским программным обеспечением, чтобы общаться с серверным приложением, расположенным на том же компьютере. Этот механизм работает без какого-либо активного подключения, поэтому он полезен для тестирования служб, не подвергая их безопасность риску, как при удаленном сетевом доступе.

- Получаем ip адрес устройства по DHCP командой `dhclient`

![dhclient](/linux/images/Part3_4.png)

DHCP - Dynamic Host Configure Protocol - протокол динамической конфигурации хоста. Позволяет присваивать адреса IP-адреса, маршрут по умолчанию и некоторую другую сетевую информацию о сети IP-устройствам. Работает одновременно на двух уровнях - канальном и сетевом.
DHCP Раздает адреса в автоматическом режиме. Работает по клиент-серверной модели: DHCP сервер раздает адреса, DHCP клиент адрес запрашивает и получает. На DHCP сервере задается диапазон адресов, которые он может раздавать клиентам. После резервации адреса за устройством, адрес удаляется из пула свободных адресов.

- Определяем и выводим на экран внешний ip адрес шлюза

![public](/linux/images/Part3_5.png)

- Определяем внутренний ip адрес шлюза, он же gateway

192.168.64.1 - ip шлюза по умолчанию

![public](/linux/images/Part3_6.png)

- Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).

![netplan0](/linux/images/Part3_7.png)
![netplan1](/linux/images/Part3_8.png)
![netplan2](/linux/images/Part3_9.png)
![res](/linux/images/Part3_10.png)
![res](/linux/images/Part3_11.png)

После перезагрузки

![check0](/linux/images/Part3_12.png)
![check1](/linux/images/Part3_13.png)
![check2](/linux/images/Part3_14.png)


## Part 4. Обновление ОС

- Обновить системные пакеты до последней на момент выполнения задания версии.

![upgrade](/linux/images/Part4_1.png)

## Part 5. Использование команды sudo

`sudo` - предоставляет возможность пользователям выполнять команды от имени суперпользователя root, либо других пользователей. Это основной способ повышать привилегии в современных системах.

В зависимости от настроек sudo в системе эта утилита может попросить ваш пароль для входа либо вообще откажется работать, сказав, что у вас нет права её использовать. Как правило, в Ubuntu sudo спрашивает пароль и запоминает его на 5 минут. На протяжении этого времени вы можете использовать sudo, не вводя пароль каждый раз.

- Разрешить пользователю, созданному в Part 2, выполнять команду sudo.

На данный момент пользователю не разрешено выполнять команду `sudo`

![sudo0](/linux/images/Part5_1.png)

Дадим пользователю права и проверим, что теперь он может выполнять команду `sudo`

![sudo1](/linux/images/Part5_2.png)

- Поменять hostname ОС.

![sudo2](/linux/images/Part5_3.png)

- Вставить скрин с изменённым hostname в отчёт.

![sudo3](/linux/images/Part5_4.png)

## Part 6. Установка и настройка службы времени

- Настроить службу автоматической синхронизации времени.

![time](/linux/images/Part5_5.png)

Вывод команды содержит `NTPSynchronized=yes`

## Part 7. Установка и использование текстовых редакторов

- Установить текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.). Используя каждый из трех выбранных редакторов, создайте файл test_X.txt, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.

VIM<br>
`sudo apt-get install vim`<br>
`vim text_vim.txt`
![vim](/linux/images/Part6_1.png)
Для выхода с сохранением изменений: ESC + : -> wq

NANO<br>
`sudo apt-get install nano`<br>
`nano text_nano.txt`
![nano](/linux/images/Part6_2.png)
Для выхода с сохранением изменений: ^X + Y

MCEDIT<br>
`sudo apt-get install mc`<br>
`mcedit test-mcedit.txt`
![mcedit](/linux/images/Part6_3.png)
Для выхода с сохранением изменений: fn + F10 -> Yes

- Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.

VIM
![vim](/linux/images/Part6_4.png)
Для выхода без сохранениея изменений: ESC + : -> q!

NANO
![nano](/linux/images/Part6_5.png)
Для выхода без сохранениея изменений: ^X + N

MCEDIT
![mcedit](/linux/images/Part6_6.png)
Для выхода без сохранениея изменений: fn + F10 -> No

- Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.

VIM
![vim](/linux/images/Part6_7.png)
![vim](/linux/images/Part6_8.png)

NANO
![nano](/linux/images/Part6_9.png)
![nano](/linux/images/Part6_10.png)

MCEDIT
![mcedit](/linux/images/Part6_11.png)
![mcedit](/linux/images/Part6_12.png)

## Part 8. Установка и базовая настройка сервиса SSHD

- Установить службу SSHd.

![ssh](/linux/images/Part8_1.png)

- Добавить автостарт службы при загрузке системы.

![ssh](/linux/images/Part8_2.png)

- Перенастроить службу SSHd на порт 2022.

![ssh](/linux/images/Part8_3.png)
![ssh](/linux/images/Part8_4.png)
![ssh](/linux/images/Part8_5.png)

- Используя команду ps, показать наличие процесса sshd. 

![ssh](/linux/images/Part8_6.png)

`ps` - утилита для просмотра списка процессов. Процесс Linux - это экземпляр программы, запущенный в памяти. 

`-a` - выбрать все процессы, кроме фоновых.

`-x` - процессы, отсоединенные от терминала.

`-f` - вывести максимум доступных данных, например, количество потоков.

`grep` - ищет совпадения.

- Перезагрузить систему.

![ssh](/linux/images/Part8_7.png)

`netstat` -  утилита командной строки, выводящая на дисплей состояние TCP-соединений (как входящих, так и исходящих), таблицы маршрутизации, число сетевых интерфейсов и сетевую статистику по протоколам.

`-t` - Показывать TCP соединения.

`-a` - Показывать состояние всех сокетов; обычно сокеты, используемые серверными процессами, не показываются.

`-n` - Показывать сетевые адреса как числа. netstat обычно показывает адреса как символы. Эту опцию можно использовать с любым форматом показа.

`Proto` - Имя протокола (TCP, UDP).

`Recv-Q` - Количество байтов, не скопированных программой пользователя, подключенной к этому сокету.

`Send-Q` - Количество байтов, не подтвержденных удаленным хостом.

`Local Address` - IP-адрес локального компьютера и используемый номер порта. Имя локального компьютера, соответствующее IP-адресу и имя порта, отображается, если не указан параметр -n . Если порт еще не установлен, номер порта отображается в виде звездочки (*).

`Foreighn Address` - IP-адрес и номер порта удаленного компьютера, к которому подключен сокет. Имена, соответствующие IP-адресу и порту, отображаются, если не указан параметр -n . Если порт еще не установлен, номер порта отображается в виде звездочки (*).

`State` - Указывает состояние сокета (LISTEN - сокет ожидает входящих соединений).

`0.0.0.0` - это немаршрутизируемый адрес IPv4, который можно использовать в разных целях, в основном, в качестве адреса по умолчанию или адреса-заполнителя. Несмотря на то, что адрес 0.0.0.0 может использоваться в компьютерных сетях, он не является адресом какого-либо устройства. IP-адрес 0.0.0.0 может использоваться на серверах для обозначения того, что служба может связываться со всеми сетевыми интерфейсами. Он дает команду серверу «прослушивать» и принимать соединения с любого IP-адреса.

## Part 9. Установка и использование утилит top, htop

- Установить и запустить утилиты top и htop.

`sudo apt-get install top`<br>
`sudo top`

![ssh](/linux/images/Part9_1.png)

uptime - 2:24<br>
количество авторизованных пользователей - 1<br>
общая загрузка системы - 0.00<br>
общее количество процессов - 116<br>
загрузку cpu - 0.0 (пользовательские процессы), 0.1 (процессы ядра), 99.9 (неиспользуемые ресурсы), 0.0 (дисковые операции ввода/вывода)<br>
загрузку памяти - 2978.3<br>
pid процесса занимающего больше всего памяти - 689<br>
pid процесса, занимающего больше всего процессорного времени - 562<br>

`sudo apt-get install htop`<br>
`sudo htop`

- отсортированному по PID
![htop](/linux/images/Part9_2.png)
- PERCENT_CPU
![htop](/linux/images/Part9_3.png)
- PERSENT_MEM
![htop](/linux/images/Part9_4.png)
- TIME
![htop](/linux/images/Part9_5.png)
- отфильтрованному для процесса sshd
![htop](/linux/images/Part9_6.png)
- с процессом syslog, найденным, используя поиск
![htop](/linux/images/Part9_7.png)
- с добавленным выводом hostname, clock и uptime
![htop](/linux/images/Part9_8.png)

## Part 10. Использование утилиты fdisk

`sudo apt install fdisk`
`sudo fdisk -l`

Название жесткого диска - /dev/vda<br>
Eго размер - 10 GB<br>
Rоличество секторов - 20971520<br>
Pазмер swap - 1604

![htop](/linux/images/Part10_1.png)
![htop](/linux/images/Part10_2.png)

## Part 11. Использование утилиты df

`df`
![htop](/linux/images/Part11_1.png)

Для корневого раздела (/):<br>
размер раздела - 8703348<br>
размер занятого пространства - 4360400<br>
размер свободного пространства - 3881124<br>
процент использования - 53%<br>
единица измерения - килобайт

`df -Th`

![htop](/linux/images/Part11_2.png)

Для корневого раздела (/):<br>
размер раздела - 8.4G<br>
размер занятого пространства - 4.2G<br>
размер свободного пространства - 3.8G<br>
процент использования - 53%<br>
тип файловой системы для раздела - ext4

## Part 12. Использование утилиты du

`du`
![htop](/linux/images/Part12_1.png)

Вывести размер папок /home, /var, /var/log (в байтах, в человекочитаемом виде)
![htop](/linux/images/Part12_2.png)
![htop](/linux/images/Part12_3.png)
![htop](/linux/images/Part12_4.png)

Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *)
![htop](/linux/images/Part12_5.png)

## Part 13. Установка и использование утилиты ncdu

`sudo apt install ncdu`

Вывести размер папок /home, /var, /var/log.
![htop](/linux/images/Part13_1.png)
![htop](/linux/images/Part13_2.png)
![htop](/linux/images/Part13_3.png)

## Part 14. Работа с системными журналами

/var/log/dmesg
![htop](/linux/images/Part14_1.png)
/var/log/syslog
![htop](/linux/images/Part14_2.png)
/var/log/authlog
![htop](/linux/images/Part14_3.png)

время последней успешной авторизации - 10:46:28<br>
имя пользователя - Person<br>
метод входа в систему - pam_unix(login:session)

`sudo systemctl restart ssh`

![htop](/linux/images/Part14_4.png)

## Part 15. Использование планировщика заданий CRON

`sudo apt install cron`

- Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.
![cron](/linux/images/Part15_1.png)

- Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
![cron](/linux/images/Part15_2.png)

- Вывести на экран список текущих заданий для CRON.
![cron](/linux/images/Part15_3.png)

- Удалите все задания из планировщика заданий. В отчёт вставьте скрин со списком текущих заданий для CRON.
![cron](/linux/images/Part15_4.png)
